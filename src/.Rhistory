library(haven)
library(readr)
library(tidyverse)
setwd("/Users/pedrovallocci/")
dhi_crsp_fullmerge_with_soc <- read_dta("Documents/PhD (local)/Research/By Topic/Bargaining Power/data/dhi_crsp_fullmerge_with_soc.dta")
View(dhi_crsp_fullmerge_with_soc)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
setwd("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
rlang::last_trace()
dog = skilldata_orig %>% filter(YEAR == 2013)
View(dog)
skilldata_orig %>% filter(YEAR == 2013) %>% pull(ind)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
dog = we_ret_bybin %>% filter(ntile_topic_kk %in% c(1,4))
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
View(we_ret_bybin)
dog = mutate(we_ret_bybin %>% filter(ntile_topic_kk %in% c(1,4)) %>% group_by(ntile_topic_kk) %>% mutate(moving_average = (lag(value, order_by = date) +
lag(value, order_by = date, n = 2) +
value) / window_size))
dog = mutate(we_ret_bybin %>% filter(ntile_topic_kk %in% c(1,4)) %>% group_by(ntile_topic_kk) %>% mutate(moving_average = (lag(value, order_by = date) +
lag(value, order_by = date, n = 2) +
value) / window_size))
dog = mutate(we_ret_bybin %>% filter(ntile_topic_kk %in% c(1,4)) %>% group_by(ntile_topic_kk) %>% mutate(moving_average = (lag(sderet, order_by = date) +
lag(sderet, order_by = date, n = 2) +
sderet) / 3))
dog = we_ret_bybin %>%
filter(ntile_topic_kk %in% c(1,4)) %>%
group_by(ntile_topic_kk) %>%
mutate(moving_average = (lag(sderet, order_by = yw) + lag(sderet, order_by = yw, n = 2) + sderet) / 3))
dog = we_ret_bybin %>%
filter(ntile_topic_kk %in% c(1,4)) %>%
group_by(ntile_topic_kk) %>%
mutate(moving_average = (lag(sderet, order_by = yw) + lag(sderet, order_by = yw, n = 2) + sderet) / 3)
we_ret_bybin = we_ret_bybin %>%
filter(ntile_topic_kk %in% c(1,4)) %>%
group_by(ntile_topic_kk) %>%
mutate(moving_average = (lag(sderet, order_by = yw)
+ lag(sderet, order_by = yw, n = 2) + lag(sderet, order_by = yw, n = 3)
+ sderet) / 4)
we_ret_bybin_filt = we_ret_bybin %>%
filter(ntile_topic_kk %in% c(1,4)) %>%
group_by(ntile_topic_kk) %>%
mutate(moving_average = (lag(sderet, order_by = yw)
+ lag(sderet, order_by = yw, n = 2) + lag(sderet, order_by = yw, n = 3)
+ sderet) / 4)
ggplot(we_ret_bybin_filt, aes(x = yw, y = sderet, col = ntile_topic_kk)) + geom_line() + labs(x = "Year-month", y = "Weekly standard deviation of returns by n-tile, mean by n-tile and week")+
theme(
legend.text = element_text(size = 14),  # Adjust legend font size
axis.text = element_text(size = 14)     # Adjust axis label font size
)
ggplot(we_ret_bybin_filt, aes(x = yw, y = moving_average, col = ntile_topic_kk)) + geom_line() + labs(x = "Year-month", y = "Weekly standard deviation of returns by n-tile, mean by n-tile and week")+
theme(
legend.text = element_text(size = 14),  # Adjust legend font size
axis.text = element_text(size = 14)     # Adjust axis label font size
)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
amazon_graph(amazon_nov01_short, figfolder)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
comparison_measures <- read.csv("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/data/comparison_measures.csv")
View(comparison_measures)
stargazer(bytech, title = "Correlation of textual-based measure of KK risk with other firm-level measures",
align = TRUE, header = FALSE,
summary = FALSE, rownames = FALSE, digit.separator = "", label = "fig:bytech", out = paste0(textfolder, "tpcavg_tech", ".tex"))
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
## Create Stargazer comparison of measures
stargaze_comparison(comparison_measures)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
stargaze_comparison(comparison_measures, figfolder)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
stargaze_comparison(comparison_measures, figfolder)
comparison_measures <- read.csv("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/data/comparison_measures.csv")
## Create Stargazer comparison of measures
stargaze_comparison(comparison_measures, figfolder)
comparison_measures <- read.csv("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/data/comparison_measures.csv")
## Create Stargazer comparison of measures
stargaze_comparison(comparison_measures, figfolder)
## Create Stargazer comparison of measures
stargaze_comparison(comparison_measures, figfolder)
comparison_measures <- read.csv("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/data/comparison_measures.csv")
## Create Stargazer comparison of measures
stargaze_comparison(comparison_measures, figfolder)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
View(topic_map)
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/utilities_R.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
print_kurtosis = TRUE
if(print_kurtosis){
kurtosis_graph(stoxda_orig, cequity_mapper, topic_map)
}
latex_table <- stargazer(second_stage_wls, title = "Regression Summary", align = TRUE, out = paste0(figfolder, "summary_table.tex"), dep.var.labels = c("test"))
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
source("~/Documents/PhD (local)/Research/Github/KnowledgeKRisk_10Ks/src/st4c_APanalysis_clean.R")
